
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <link rel="canonical" href="https://AFM-SPM.github.io/TopoStats/v2.3.1/configuration/">
      
      
      
      
        
      
      
      <link rel="icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.7.1">
    
    
      
        <title>Configuration - TopoStats</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.484c7ddc.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.ab4e12ef.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../assets/_mkdocstrings.css">
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#configuration" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <div data-md-color-scheme="default" data-md-component="outdated" hidden>
        
      </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="TopoStats" class="md-header__button md-logo" aria-label="TopoStats" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            TopoStats
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Configuration
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12s-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
      <div class="md-header__source">
        <a href="https://github.com/AFM-SPM/TopoStats/" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="TopoStats" class="md-nav__button md-logo" aria-label="TopoStats" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    TopoStats
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/AFM-SPM/TopoStats/" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Home
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../introduction/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Introduction
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Usage
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            
  
    Usage
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../usage/installation/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Installation
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../usage/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Getting Started
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../usage/configuration/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Configuration
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../usage/notebooks/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Notebooks
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../usage/matplotlib-style/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Matplotlib Style
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../usage/data_dictionary/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Data Dictionary
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../usage/workflow/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Workflow
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../related_software/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Related Software
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../glossary/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Glossary
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../faq/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    FAQ
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_7" >
        
          
          <label class="md-nav__link" for="__nav_7" id="__nav_7_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Contributing
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7">
            <span class="md-nav__icon md-icon"></span>
            
  
    Contributing
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../contributing/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Contributing
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../contributing/adding_modules/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Adding Modules
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_8" >
        
          
          <label class="md-nav__link" for="__nav_8" id="__nav_8_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Advanced Documentation
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_8_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_8">
            <span class="md-nav__icon md-icon"></span>
            
  
    Advanced Documentation
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../advanced/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Overview
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../advanced/flattening/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Flattening
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../advanced/grain_finding/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Grain finding
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../advanced/thresholding/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Thresholding
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../advanced/grainstats/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Grainstats
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../advanced/disordered_tracing/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Disordered Tracing
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../advanced/nodestats/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    NodeStats
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../advanced/ordered_tracing/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Ordered Tracing
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../advanced/splining/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Splining
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_9" >
        
          
          <label class="md-nav__link" for="__nav_9" id="__nav_9_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    API
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_9_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_9">
            <span class="md-nav__icon md-icon"></span>
            
  
    API
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../api/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    API
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../api/entry_point/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Entry Point
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../api/filters/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Filters
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../api/grains/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Grains
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../api/grainstats/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Grainstats
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../api/io/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    IO
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../api/plotting/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Plotting
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../api/plottingfuncs/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    PlottingFuncs
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../api/run_modules/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Run Modules
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../api/scars/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Scars
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../api/statistics/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Statistics
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../api/theme/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Theme
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../api/thresholds/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Thresholds
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../api/utils/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Utils
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../api/validation/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Validation
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#generating-a-configuration" class="md-nav__link">
    <span class="md-ellipsis">
      
        Generating a configuration
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#partial-configurations" class="md-nav__link">
    <span class="md-ellipsis">
      
        Partial configurations
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#using-a-custom-configuration" class="md-nav__link">
    <span class="md-ellipsis">
      
        Using a custom configuration
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#yaml-structure" class="md-nav__link">
    <span class="md-ellipsis">
      
        YAML Structure
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#fields" class="md-nav__link">
    <span class="md-ellipsis">
      
        Fields
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#summary-configuration" class="md-nav__link">
    <span class="md-ellipsis">
      
        Summary Configuration
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#validation" class="md-nav__link">
    <span class="md-ellipsis">
      
        Validation
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#matplotlib-style" class="md-nav__link">
    <span class="md-ellipsis">
      
        Matplotlib Style
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Matplotlib Style">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#further-customisation" class="md-nav__link">
    <span class="md-ellipsis">
      
        Further customisation
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Further customisation">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#dpi" class="md-nav__link">
    <span class="md-ellipsis">
      
        DPI
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#colormap" class="md-nav__link">
    <span class="md-ellipsis">
      
        Colormap
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#saved-image-format" class="md-nav__link">
    <span class="md-ellipsis">
      
        Saved Image format
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#absolute-v-relative-paths" class="md-nav__link">
    <span class="md-ellipsis">
      
        Absolute v Relative paths
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              
              <article class="md-content__inner md-typeset">
                
                  


  
  


<h1 id="configuration">Configuration</h1>
<p>Configuration for TopoStats is done using a <a href="https://yaml.org/">YAML</a> configuration file that is specified on the
command line when invoking. If no configuration file is provided this default configuration is loaded automatically and
used.</p>
<p>The current configuration file is provided in the TopoStats repository at
<a href="https://github.com/AFM-SPM/TopoStats/blob/main/topostats/default_config.yaml"><code>topostats/default_config.yaml</code></a> but
please be aware this may not work with your installed version, particularly if you installed from PyPI.</p>
<h2 id="generating-a-configuration">Generating a configuration</h2>
<p>You can always generate a configuration file appropriate for the version you have installed (bar v2.0.0 as this option
was added afterwards). This writes the default configuration to the specified filename (i.e. it does not have to be
called <code>config.yaml</code> it could be called <code>spm-2023-02-20.yaml</code>). There are a few options available (use <code>topostats
create-config --help</code> for further details).</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-0-1"><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a>topostats<span class="w"> </span>create-config
</span></code></pre></div>
<h2 id="partial-configurations">Partial configurations</h2>
<p>TopoStats supports using a partial configuration, where you specify only the fields you wish to override. This is
useful if you only want to change a few parameters from the default configuration or would like to use a configuration
file that is smaller and easier to read.</p>
<p>To create a partial configuration file, simply create a new config file and delete anything you don't want to override.</p>
<p>TopoStats will take the partial configuration file and merge it with the default configuration file, with the partial
configuration taking precedence. This means that any fields you specify in the partial configuration will override the
default configuration, while any fields you don't specify will be taken from the default configuration. Command-line
arguments will override both the default and partial configurations.</p>
<p>For example, you could use a configuration as simple as:</p>
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-1-1"><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a><span class="nt">base_dir</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">./mydata/</span>
</span><span id="__span-1-2"><a id="__codelineno-1-2" name="__codelineno-1-2" href="#__codelineno-1-2"></a><span class="nt">output_dir</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">./myoutput/</span>
</span><span id="__span-1-3"><a id="__codelineno-1-3" name="__codelineno-1-3" href="#__codelineno-1-3"></a><span class="nt">filter</span><span class="p">:</span>
</span><span id="__span-1-4"><a id="__codelineno-1-4" name="__codelineno-1-4" href="#__codelineno-1-4"></a><span class="w">  </span><span class="nt">remove_scars</span><span class="p">:</span>
</span><span id="__span-1-5"><a id="__codelineno-1-5" name="__codelineno-1-5" href="#__codelineno-1-5"></a><span class="w">    </span><span class="nt">run</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
</span><span id="__span-1-6"><a id="__codelineno-1-6" name="__codelineno-1-6" href="#__codelineno-1-6"></a><span class="nt">grains</span><span class="p">:</span>
</span><span id="__span-1-7"><a id="__codelineno-1-7" name="__codelineno-1-7" href="#__codelineno-1-7"></a><span class="w">  </span><span class="nt">threshold_method</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">absolute</span>
</span><span id="__span-1-8"><a id="__codelineno-1-8" name="__codelineno-1-8" href="#__codelineno-1-8"></a><span class="w">  </span><span class="nt">threshold_absolute</span><span class="p">:</span>
</span><span id="__span-1-9"><a id="__codelineno-1-9" name="__codelineno-1-9" href="#__codelineno-1-9"></a><span class="w">    </span><span class="nt">above</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1.2</span>
</span><span id="__span-1-10"><a id="__codelineno-1-10" name="__codelineno-1-10" href="#__codelineno-1-10"></a><span class="w">  </span><span class="nt">absolute_area_threshold</span><span class="p">:</span>
</span><span id="__span-1-11"><a id="__codelineno-1-11" name="__codelineno-1-11" href="#__codelineno-1-11"></a><span class="w">    </span><span class="nt">above</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">400</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">1000</span><span class="p p-Indicator">]</span>
</span></code></pre></div>
<h2 id="using-a-custom-configuration">Using a custom configuration</h2>
<p>If you have generated a configuration file you can modify and edit a configuration it to change the parameters (see
fields below). Once these changes have been saved, you can run TopoStats with this configuration file as shown below.</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-2-1"><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a>topostats<span class="w"> </span>--config<span class="w"> </span>my_config.yaml<span class="w"> </span>process
</span></code></pre></div>
<p>On completion a copy of the configuration that was used is written to the output directory so you have a record of the
parameters used to generate the results you have. This file can be used in subsequent runs of TopoStats.</p>
<h2 id="yaml-structure">YAML Structure</h2>
<p>YAML files have key and value pairs, the first word, e.g. <code>base_dir</code> is the key this is followed by a colon to separate
it from the value that it takes, by default <code>base_dir</code> takes the value <code>./</code> (which means the current directory) and so
the entry in the file is a single line with <code>base_dir: ./</code>. Other data structures are available in YAML files including
nested values and lists.</p>
<p>A list in YAML consists of a key (e.g. <code>above:</code>) followed by the values in square brackets separated by commas such as
<code>above: [ 500, 800 ]</code>. This means the <code>above</code> key is a list of the values <code>500</code> and <code>800</code>. Long lists can be split over
separate lines as shown below</p>
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-3-1"><a id="__codelineno-3-1" name="__codelineno-3-1" href="#__codelineno-3-1"></a><span class="nt">above</span><span class="p">:</span>
</span><span id="__span-3-2"><a id="__codelineno-3-2" name="__codelineno-3-2" href="#__codelineno-3-2"></a><span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">100</span>
</span><span id="__span-3-3"><a id="__codelineno-3-3" name="__codelineno-3-3" href="#__codelineno-3-3"></a><span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">200</span>
</span><span id="__span-3-4"><a id="__codelineno-3-4" name="__codelineno-3-4" href="#__codelineno-3-4"></a><span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">300</span>
</span><span id="__span-3-5"><a id="__codelineno-3-5" name="__codelineno-3-5" href="#__codelineno-3-5"></a><span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">400</span>
</span></code></pre></div>
<h2 id="fields">Fields</h2>
<p>Aside from the comments in YAML file itself the fields are described below.</p>
<table>
<thead>
<tr>
<th style="text-align: left;">Section</th>
<th style="text-align: left;">Sub-Section</th>
<th style="text-align: left;">Data Type</th>
<th style="text-align: left;">Default</th>
<th style="text-align: left;">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left;"><code>base_dir</code></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">string</td>
<td style="text-align: left;"><code>./</code></td>
<td style="text-align: left;">Directory to recursively search for files within. (See <a href="#absolute-v-relative-paths">Absolute v Relative Paths</a>)</td>
</tr>
<tr>
<td style="text-align: left;"><code>output_dir</code></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">string</td>
<td style="text-align: left;"><code>./output</code></td>
<td style="text-align: left;">Directory that output should be saved to. (See <a href="#absolute-v-relative-paths">Absolute v Relative Paths</a>)</td>
</tr>
<tr>
<td style="text-align: left;"><code>log_level</code></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">string</td>
<td style="text-align: left;"><code>info</code></td>
<td style="text-align: left;">Verbosity of logging, options are (in increasing order) <code>warning</code>, <code>error</code>, <code>info</code>, <code>debug</code>.</td>
</tr>
<tr>
<td style="text-align: left;"><code>cores</code></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">integer</td>
<td style="text-align: left;"><code>2</code></td>
<td style="text-align: left;">Number of cores to run parallel processes on.</td>
</tr>
<tr>
<td style="text-align: left;"><code>file_ext</code></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">string</td>
<td style="text-align: left;"><code>.spm</code></td>
<td style="text-align: left;">File extensions to search for.</td>
</tr>
<tr>
<td style="text-align: left;"><code>loading</code></td>
<td style="text-align: left;"><code>channel</code></td>
<td style="text-align: left;">string</td>
<td style="text-align: left;"><code>Height</code></td>
<td style="text-align: left;">The channel of data to be processed, what this is will depend on the file-format you are processing and the channel you wish to process.</td>
</tr>
<tr>
<td style="text-align: left;"><code>filter</code></td>
<td style="text-align: left;"><code>run</code></td>
<td style="text-align: left;">boolean</td>
<td style="text-align: left;"><code>true</code></td>
<td style="text-align: left;">Whether to run the filtering stage, without this other stages won't run so leave as <code>true</code>.</td>
</tr>
<tr>
<td style="text-align: left;"></td>
<td style="text-align: left;"><code>threshold_method</code></td>
<td style="text-align: left;">str</td>
<td style="text-align: left;"><code>std_dev</code></td>
<td style="text-align: left;">Threshold method for filtering, options are <code>ostu</code>, <code>std_dev</code> or <code>absolute</code>.</td>
</tr>
<tr>
<td style="text-align: left;"></td>
<td style="text-align: left;"><code>otsu_threshold_multiplier</code></td>
<td style="text-align: left;">float</td>
<td style="text-align: left;"><code>1.0</code></td>
<td style="text-align: left;">Factor by which the derived Otsu Threshold should be scaled.</td>
</tr>
<tr>
<td style="text-align: left;"></td>
<td style="text-align: left;"><code>threshold_std_dev</code></td>
<td style="text-align: left;">dictionary</td>
<td style="text-align: left;"><code>10.0, 1.0</code></td>
<td style="text-align: left;">A pair of values that scale the standard deviation, after scaling the standard deviation <code>below</code> is subtracted from the image mean to give the below/lower threshold and the <code>above</code> is added to the image mean to give the above/upper threshold. These values should <em>always</em> be positive.</td>
</tr>
<tr>
<td style="text-align: left;"></td>
<td style="text-align: left;"><code>threshold_absolute</code></td>
<td style="text-align: left;">dictionary</td>
<td style="text-align: left;"><code>-1.0, 1.0</code></td>
<td style="text-align: left;">Below (first) and above (second) absolute threshold for separating data from the image background.</td>
</tr>
<tr>
<td style="text-align: left;"></td>
<td style="text-align: left;"><code>gaussian_size</code></td>
<td style="text-align: left;">float</td>
<td style="text-align: left;"><code>0.5</code></td>
<td style="text-align: left;">The number of standard deviations to build the Gaussian kernel and thus affects the degree of blurring. See <a href="https://scikit-image.org/docs/dev/api/skimage.filters.html#skimage.filters.gaussian">skimage.filters.gaussian</a> and <code>sigma</code> for more information.</td>
</tr>
<tr>
<td style="text-align: left;"></td>
<td style="text-align: left;"><code>gaussian_mode</code></td>
<td style="text-align: left;">string</td>
<td style="text-align: left;"><code>nearest</code></td>
<td style="text-align: left;"></td>
</tr>
<tr>
<td style="text-align: left;"><code>filter</code> <br> ∟ <code>remove_scars</code></td>
<td style="text-align: left;"><code>run</code></td>
<td style="text-align: left;">bool</td>
<td style="text-align: left;"><code>true</code></td>
<td style="text-align: left;">Whether to run scar removal.</td>
</tr>
<tr>
<td style="text-align: left;"></td>
<td style="text-align: left;"><code>removal_iterations</code></td>
<td style="text-align: left;">int</td>
<td style="text-align: left;"><code>2</code></td>
<td style="text-align: left;">The number of times to run scar removal. More iterations can improve scar removal by tidying up remaining artefacts after removal, though will cause more data distortion.</td>
</tr>
<tr>
<td style="text-align: left;"></td>
<td style="text-align: left;"><code>threshold_low</code></td>
<td style="text-align: left;">float</td>
<td style="text-align: left;"><code>0.250</code></td>
<td style="text-align: left;">The threshold determining whether to further assess if a pixel is a scar. This is the first check, and lowering it will allow more pixels to undergo further analysis in determining if they are scars.</td>
</tr>
<tr>
<td style="text-align: left;"></td>
<td style="text-align: left;"><code>threshold_high</code></td>
<td style="text-align: left;">float</td>
<td style="text-align: left;"><code>0.666</code></td>
<td style="text-align: left;">The threshold above which a pixel ridge is automatically determined to be a scar. Lowering this value will increase the number of pixels that are flagged as scars with no additional checks.</td>
</tr>
<tr>
<td style="text-align: left;"></td>
<td style="text-align: left;"><code>max_scar_width</code></td>
<td style="text-align: left;">int</td>
<td style="text-align: left;"><code>4</code></td>
<td style="text-align: left;">The maximum thickness of scars in pixels, along their short axis, ie vertical distance in an AFM image. This parameter can be reduced to only allow marking of thin scars or increased to allow thicker regions to be marked as scars. Be careful - if this value in pixels approaches the thickness of DNA, then it will start deleting regions of DNA (or other relevant data).</td>
</tr>
<tr>
<td style="text-align: left;"></td>
<td style="text-align: left;"><code>min_scar_length</code></td>
<td style="text-align: left;">int</td>
<td style="text-align: left;"><code>16</code></td>
<td style="text-align: left;">The minimum length of scars in pixels, along their long axis, ie horizontal distance in an AFM image. This parameter can be reduced to allow shorter ridges to be marked as scars, or increased to only allow longer regions to be marked. This can be used to attempt to avoid marking data such as DNA from being marked as a scar, as it may be unlikely that you have a section of DNA that is straight and more than 16 pixels long.</td>
</tr>
<tr>
<td style="text-align: left;"><code>grains</code></td>
<td style="text-align: left;"><code>run</code></td>
<td style="text-align: left;">boolean</td>
<td style="text-align: left;"><code>true</code></td>
<td style="text-align: left;">Whether to run grain finding. Options <code>true</code>, <code>false</code></td>
</tr>
<tr>
<td style="text-align: left;"></td>
<td style="text-align: left;"><code>row_alignment_quantile</code></td>
<td style="text-align: left;">float</td>
<td style="text-align: left;"><code>0.5</code></td>
<td style="text-align: left;">Quantile (0.0 to 1.0) to be used to determine the average background for the image. below values may improve flattening of large features.</td>
</tr>
<tr>
<td style="text-align: left;"></td>
<td style="text-align: left;"><code>smallest_grain_size_nm2</code></td>
<td style="text-align: left;">int</td>
<td style="text-align: left;"><code>100</code></td>
<td style="text-align: left;">The smallest size of grains to be included (in nm^2), anything smaller than this is considered noise and removed. <strong>NB</strong> must be <code>&gt; 0.0</code>.</td>
</tr>
<tr>
<td style="text-align: left;"></td>
<td style="text-align: left;"><code>threshold_method</code></td>
<td style="text-align: left;">float</td>
<td style="text-align: left;"><code>std_dev</code></td>
<td style="text-align: left;">Threshold method for grain finding. Options : <code>otsu</code>, <code>std_dev</code>, <code>absolute</code></td>
</tr>
<tr>
<td style="text-align: left;"></td>
<td style="text-align: left;"><code>otsu_threshold_multiplier</code></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"><code>1.0</code></td>
<td style="text-align: left;">Factor by which the derived Otsu Threshold should be scaled.</td>
</tr>
<tr>
<td style="text-align: left;"></td>
<td style="text-align: left;"><code>threshold_std_dev</code></td>
<td style="text-align: left;">dictionary</td>
<td style="text-align: left;"><code>10.0, 1.0</code></td>
<td style="text-align: left;">A pair of values that scale the standard deviation, after scaling the standard deviation <code>below</code> is subtracted from the image mean to give the below/lower threshold and the <code>above</code> is added to the image mean to give the above/upper threshold. These values should <em>always</em> be positive.</td>
</tr>
<tr>
<td style="text-align: left;"></td>
<td style="text-align: left;"><code>threshold_absolute</code></td>
<td style="text-align: left;">dictionary</td>
<td style="text-align: left;"><code>-1.0, 1.0</code></td>
<td style="text-align: left;">Below (first), above (second) absolute threshold for separating grains from the image background.</td>
</tr>
<tr>
<td style="text-align: left;"></td>
<td style="text-align: left;"><code>direction</code></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"><code>above</code></td>
<td style="text-align: left;">Defines whether to look for grains above or below thresholds or both. Options: <code>above</code>, <code>below</code>, <code>both</code></td>
</tr>
<tr>
<td style="text-align: left;"></td>
<td style="text-align: left;"><code>smallest_grain_size</code></td>
<td style="text-align: left;">int</td>
<td style="text-align: left;"><code>50</code></td>
<td style="text-align: left;">Catch-all value for the minimum size of grains. Measured in nanometres squared. All grains with area below than this value are removed.</td>
</tr>
<tr>
<td style="text-align: left;"></td>
<td style="text-align: left;"><code>absolute_area_threshold</code></td>
<td style="text-align: left;">dictionary</td>
<td style="text-align: left;"><code>[300, 3000], [null, null]</code></td>
<td style="text-align: left;">Area thresholds for above the image background (first) and below the image background (second), which grain sizes are permitted, measured in nanometres squared. All grains outside this area range are removed.</td>
</tr>
<tr>
<td style="text-align: left;"></td>
<td style="text-align: left;"><code>remove_edge_intersecting_grains</code></td>
<td style="text-align: left;">boolean</td>
<td style="text-align: left;"><code>true</code></td>
<td style="text-align: left;">Whether to remove grains that intersect the image border. <em>Do not change this unless you know what you are doing</em>. This will ruin any statistics relating to grain size, shape and DNA traces.</td>
</tr>
<tr>
<td style="text-align: left;"><code>grains</code> <br> ∟ <code>unet_config</code></td>
<td style="text-align: left;"><code>path_to_model</code></td>
<td style="text-align: left;">str</td>
<td style="text-align: left;"><code>null</code></td>
<td style="text-align: left;">The path to the U-Net model to override traditional segmentation. Supply a path to a tensorflow U-net model to use, else U-Net segmentation will be skipped.</td>
</tr>
<tr>
<td style="text-align: left;"></td>
<td style="text-align: left;"><code>grain_crop_padding</code></td>
<td style="text-align: left;">int</td>
<td style="text-align: left;"><code>0</code></td>
<td style="text-align: left;">The amount of padding to be applied to grain crops before they are passed to the U-Net model. Increasing this value within reason may reduce edge-anomalies within the crops. Additionally, models are usually trained assuming the grain will take up a certain proportion of the image. If segmentation is poor, try increasing this.</td>
</tr>
<tr>
<td style="text-align: left;"></td>
<td style="text-align: left;"><code>upper_norm_bound</code></td>
<td style="text-align: left;">float</td>
<td style="text-align: left;"><code>5.0</code></td>
<td style="text-align: left;">The upper normalisation bound for normalising grain crops before sending to the segmentation model. The model will have been trained with particular normalisation bounds, use those. If in doubt, talk to the person who trained the model or use a sensible range, eg if DNA is expected between 0 and 2nm, try using -1 to 3 as normalisation bounds.</td>
</tr>
<tr>
<td style="text-align: left;"></td>
<td style="text-align: left;"><code>lower_norm_bound</code></td>
<td style="text-align: left;">float</td>
<td style="text-align: left;"><code>-1</code></td>
<td style="text-align: left;">The lower normalisation bound for normalising grain crops before sending to the segmentation model. The model will have been trained with particular normalisation bounds, use those. If in doubt, talk to the person who trained the model or use a sensible range, eg if DNA is expected between 0 and 2nm, try using -1 to 3 as normalisation bounds.</td>
</tr>
<tr>
<td style="text-align: left;"><code>grains</code> <br> ∟ <code>vetting</code></td>
<td style="text-align: left;"><code>class_region_number_thresholds</code></td>
<td style="text-align: left;">list[tuple[int, int, int]]</td>
<td style="text-align: left;"><code>null</code></td>
<td style="text-align: left;">Class region number thresholds, list of lists, <code>[[class, low, high]]</code>, eg: <code>[[1, 2, 4], [2, 1 ,1]]</code> for class 1 to have 2-4 regions and class 2 to have 1 region. Can use Noneto not set an upper/lower bound.</td>
</tr>
<tr>
<td style="text-align: left;"></td>
<td style="text-align: left;"><code>class_conversion_size_thresholds</code></td>
<td style="text-align: left;">list[tuple[tuple[int, int, int], tuple[int, int]]]</td>
<td style="text-align: left;"><code>null</code></td>
<td style="text-align: left;">Class conversion size thresholds, list of tuples of 3 integers and 2 integers, ie <code>list[tuple[tuple[int, int, int], tuple[int, int]]]</code> eg <code>[[[1, 2, 3], [5, 10]]]</code> for each region of class 1 to convert to 2 if smaller than 5 nm^2 and to class 3 if larger than 10 nm^2.</td>
</tr>
<tr>
<td style="text-align: left;"></td>
<td style="text-align: left;"><code>class_size_thresholds</code></td>
<td style="text-align: left;">list[tuple[int, int, int]]</td>
<td style="text-align: left;">null</td>
<td style="text-align: left;">Class size thresholds (nm^2), list of tuples of 3 integers, ie <code>[[class, low, high],]</code> eg <code>[[1, 100, 1000], [2, 1000, None]]</code> for class 1 to have 100-1000 nm^2 and class 2 to have 1000-any nm^2. Can use None to not set an upper/lower bound.</td>
</tr>
<tr>
<td style="text-align: left;"></td>
<td style="text-align: left;"><code>nearby_conversion_classes_to_convert</code></td>
<td style="text-align: left;">list[tuple[tuple[int, int], tuple[int, int]]]</td>
<td style="text-align: left;"><code>null</code></td>
<td style="text-align: left;">Class conversion for nearby regions, list of tuples of two-integer tuples, eg <code>[[[1, 2], [3, 4]]]</code> to convert class 1 to 2 and 3 to 4 for small touching regions</td>
</tr>
<tr>
<td style="text-align: left;"></td>
<td style="text-align: left;"><code>class_touching_threshold</code></td>
<td style="text-align: left;">int</td>
<td style="text-align: left;"><code>5</code></td>
<td style="text-align: left;">Number of dilation steps to use for detecting touching regions, higher value will mean further away regions will be considered touching</td>
</tr>
<tr>
<td style="text-align: left;"></td>
<td style="text-align: left;"><code>keep_largest_labelled_regions_classes</code></td>
<td style="text-align: left;">list[int]</td>
<td style="text-align: left;"><code>null</code></td>
<td style="text-align: left;">Classes to keep only the largest labelled regions for, list of integers eg <code>[1, 2]</code> to keep only the largest labelled regions for classes 1 and 2</td>
</tr>
<tr>
<td style="text-align: left;"></td>
<td style="text-align: left;"><code>class_connection_point_thresholds</code></td>
<td style="text-align: left;">list[tuple[tuple[int, int] tuple[int, int]]]</td>
<td style="text-align: left;"><code>null</code></td>
<td style="text-align: left;">Class connection point thresholds, <code>[[[class_1, class_2], [min, max]]]</code> eg <code>[[[1, 2], [1, 1]]]</code> for class 1 to have 1 connection point with class 2</td>
</tr>
<tr>
<td style="text-align: left;"><code>grainstats</code></td>
<td style="text-align: left;"><code>run</code></td>
<td style="text-align: left;">boolean</td>
<td style="text-align: left;"><code>true</code></td>
<td style="text-align: left;">Whether to calculate grain statistics. Options : <code>true</code>, <code>false</code></td>
</tr>
<tr>
<td style="text-align: left;"></td>
<td style="text-align: left;"><code>cropped_size</code></td>
<td style="text-align: left;">float</td>
<td style="text-align: left;"><code>40.0</code></td>
<td style="text-align: left;">Force cropping of grains to this length (in nm) of square cropped images (can take <code>-1</code> for grain-sized box)</td>
</tr>
<tr>
<td style="text-align: left;"></td>
<td style="text-align: left;"><code>edge_detection_method</code></td>
<td style="text-align: left;">str</td>
<td style="text-align: left;"><code>binary_erosion</code></td>
<td style="text-align: left;">Type of edge detection method to use when determining the edges of grain masks before calculating statistics on them. Options : <code>binary_erosion</code>, <code>canny</code>.</td>
</tr>
<tr>
<td style="text-align: left;"><code>disordered_tracing</code></td>
<td style="text-align: left;"><code>run</code></td>
<td style="text-align: left;">boolean</td>
<td style="text-align: left;"><code>true</code></td>
<td style="text-align: left;">Whether to run the Disordered Traces pipeline. Options : true, false</td>
</tr>
<tr>
<td style="text-align: left;"></td>
<td style="text-align: left;"><code>min_skeleton_size</code></td>
<td style="text-align: left;">int</td>
<td style="text-align: left;"><code>10</code></td>
<td style="text-align: left;">The minimum number of pixels a skeleton should be for statistics to be calculated on it. Anything smaller than this is dropped but grain statistics are retained.</td>
</tr>
<tr>
<td style="text-align: left;"></td>
<td style="text-align: left;"><code>pad_width</code></td>
<td style="text-align: left;">str</td>
<td style="text-align: left;"><code>1</code></td>
<td style="text-align: left;">Padding for individual grains when tracing. This is sometimes required if the bounding box around grains is too tight and they touch the edge of the image.</td>
</tr>
<tr>
<td style="text-align: left;"><code>disordered_tracing</code> <br> ∟ <code>mask_smoothing_params</code></td>
<td style="text-align: left;"><code>gaussian_sigma</code></td>
<td style="text-align: left;">float</td>
<td style="text-align: left;"><code>2</code></td>
<td style="text-align: left;">Amount of smoothing by a gaussian kernel. This will compete with <code>dilation_iteration</code> to see which changes the grain mask least, ensuring quality over different scan sizes.</td>
</tr>
<tr>
<td style="text-align: left;"></td>
<td style="text-align: left;"><code>dialtion_iterations</code></td>
<td style="text-align: left;">int</td>
<td style="text-align: left;"><code>2</code></td>
<td style="text-align: left;">The the number of dilations to perform to smooth. This will compete with <code>gaussian_sigma</code> to see which changes the grain mask least, ensuring quality over different scan sizes.</td>
</tr>
<tr>
<td style="text-align: left;"></td>
<td style="text-align: left;"><code>holearea_min_max</code></td>
<td style="text-align: left;">list</td>
<td style="text-align: left;"><code>[0, null]</code></td>
<td style="text-align: left;">As smoothing fill holes in the mask, this replaces those within a size range (in nm^2).</td>
</tr>
<tr>
<td style="text-align: left;"><code>disordered_tracing</code> <br> ∟ <code>skeletonisation_params</code></td>
<td style="text-align: left;"><code>method</code></td>
<td style="text-align: left;">str</td>
<td style="text-align: left;"><code>topostats</code></td>
<td style="text-align: left;">The Skeletonisation method to use, possible options are <code>zhang</code>, <code>lee</code>, <code>thin</code> (from <a href="https://scikit-image.org/docs/stable/api/skimage.morphology.html">Scikit-image Morphology module</a>) or the original bespoke TopoStats (height-biasing) method topostats.</td>
</tr>
<tr>
<td style="text-align: left;"></td>
<td style="text-align: left;"><code>height_bias</code></td>
<td style="text-align: left;">float</td>
<td style="text-align: left;"><code>0.6</code></td>
<td style="text-align: left;">The percentage of lowest pixels to remove during each skeletonisation iteration of the <code>topostats</code> method.</td>
</tr>
<tr>
<td style="text-align: left;"><code>disordered_tracing</code> <br> ∟ <code>pruning_params</code></td>
<td style="text-align: left;"><code>max_length</code></td>
<td style="text-align: left;">float</td>
<td style="text-align: left;"><code>-1</code></td>
<td style="text-align: left;">The length in nanometres below which to prune branches. Default is <code>-1</code>, meaning 15% of the total length.</td>
</tr>
<tr>
<td style="text-align: left;"></td>
<td style="text-align: left;"><code>height_threshold</code></td>
<td style="text-align: left;">float</td>
<td style="text-align: left;"><code>null</code></td>
<td style="text-align: left;">The height threshold in nanometres below which to prune branches.</td>
</tr>
<tr>
<td style="text-align: left;"></td>
<td style="text-align: left;"><code>method_values</code></td>
<td style="text-align: left;">str</td>
<td style="text-align: left;"><code>mid</code></td>
<td style="text-align: left;">The method that determines how branch height is calculated. Options: <code>min</code>, <code>median</code>, <code>mid</code> (middle).</td>
</tr>
<tr>
<td style="text-align: left;"></td>
<td style="text-align: left;"><code>method_outliers</code></td>
<td style="text-align: left;">str</td>
<td style="text-align: left;"><code>mean_abs</code></td>
<td style="text-align: left;">How to compare the threshold and branch heights to remove low branches. Options are; the inter-quartile range <code>iqr</code>, the height_threshold as an absolute value <code>abs</code>, or the mean of all branches minus the height_threshold value <code>mean_abs</code>.</td>
</tr>
<tr>
<td style="text-align: left;"><code>nodestats</code></td>
<td style="text-align: left;"><code>run</code></td>
<td style="text-align: left;">boolean</td>
<td style="text-align: left;"><code>true</code></td>
<td style="text-align: left;">Whether to quantify the crossings in an image. Required for over/under tracing through crossings. Options : true, false</td>
</tr>
<tr>
<td style="text-align: left;"></td>
<td style="text-align: left;"><code>node_joining_length</code></td>
<td style="text-align: left;">float</td>
<td style="text-align: left;"><code>7.0</code></td>
<td style="text-align: left;">The distance (nm) over which to join nearby crossing points as the skeletonisation will not always force crossing points to connect.</td>
</tr>
<tr>
<td style="text-align: left;"></td>
<td style="text-align: left;"><code>node_extend_list</code></td>
<td style="text-align: left;">float</td>
<td style="text-align: left;"><code>14.0</code></td>
<td style="text-align: left;">The distance (nm) over which to join nearby odd-branched nodes.</td>
</tr>
<tr>
<td style="text-align: left;"></td>
<td style="text-align: left;"><code>branch_pairing_length</code></td>
<td style="text-align: left;">float</td>
<td style="text-align: left;"><code>nodestats</code></td>
<td style="text-align: left;">The length (nm) from the crossing point to pair the emainating branches and trace along to obtain the over/under distinguishing full-width half-maximum (FWHM's) values.</td>
</tr>
<tr>
<td style="text-align: left;"></td>
<td style="text-align: left;"><code>pair_odd_branches</code></td>
<td style="text-align: left;">boolean</td>
<td style="text-align: left;"><code>true</code></td>
<td style="text-align: left;">Whether to try and pair branches at odd-branch crossing regions and leave one hanging branch, or to leave all branches hanging here. Options: <code>true</code> or <code>false</code>.</td>
</tr>
<tr>
<td style="text-align: left;"></td>
<td style="text-align: left;"><code>pad_width</code></td>
<td style="text-align: left;">str</td>
<td style="text-align: left;"><code>1</code></td>
<td style="text-align: left;">Padding for individual grains when tracing. This is sometimes required if the bounding box around grains is too tight and they touch the edge of the image.</td>
</tr>
<tr>
<td style="text-align: left;"><code>ordered_tracing</code></td>
<td style="text-align: left;"><code>run</code></td>
<td style="text-align: left;">boolean</td>
<td style="text-align: left;"><code>true</code></td>
<td style="text-align: left;">Whether to order the pruned skeletons of Disordered Traces. Options : true, false</td>
</tr>
<tr>
<td style="text-align: left;"></td>
<td style="text-align: left;"><code>ordering_method</code></td>
<td style="text-align: left;">str</td>
<td style="text-align: left;"><code>nodestats</code></td>
<td style="text-align: left;">The method of ordering the disordered traces either using the nodestats output or solely the disordered traces. Options: <code>nodestats</code> or <code>topostats</code>.</td>
</tr>
<tr>
<td style="text-align: left;"></td>
<td style="text-align: left;"><code>pad_width</code></td>
<td style="text-align: left;">int</td>
<td style="text-align: left;">10</td>
<td style="text-align: left;">Padding for individual grains when tracing. This is sometimes required if the bounding box around grains is too tight and they touch the edge of the image.</td>
</tr>
<tr>
<td style="text-align: left;"><code>splining</code></td>
<td style="text-align: left;"><code>run</code></td>
<td style="text-align: left;">boolean</td>
<td style="text-align: left;"><code>true</code></td>
<td style="text-align: left;">Whether to run ordered trace splining to generate smooth traces. Options : true, false</td>
</tr>
<tr>
<td style="text-align: left;"></td>
<td style="text-align: left;"><code>method</code></td>
<td style="text-align: left;">int</td>
<td style="text-align: left;"><code>rolling_window</code></td>
<td style="text-align: left;">The method used to smooth out the ordered traces. Options: <code>rolling_window</code> or <code>spline</code>.</td>
</tr>
<tr>
<td style="text-align: left;"></td>
<td style="text-align: left;"><code>rolling_window_size</code></td>
<td style="text-align: left;">int</td>
<td style="text-align: left;"><code>20.0e-9</code></td>
<td style="text-align: left;">The length (in meters) of the coordinate averaging window to smooth the ordered trace.</td>
</tr>
<tr>
<td style="text-align: left;"></td>
<td style="text-align: left;"><code>spline_step_size</code></td>
<td style="text-align: left;">int</td>
<td style="text-align: left;"><code>7.0e-9</code></td>
<td style="text-align: left;">The The sampling length of the spline (in meters) to obtain an average of splines.</td>
</tr>
<tr>
<td style="text-align: left;"></td>
<td style="text-align: left;"><code>spline_linear_smoothing</code></td>
<td style="text-align: left;">int</td>
<td style="text-align: left;"><code>5.0</code></td>
<td style="text-align: left;">The amount of smoothing to apply to linear molecule splines.</td>
</tr>
<tr>
<td style="text-align: left;"></td>
<td style="text-align: left;"><code>spline_circular_smoothing</code></td>
<td style="text-align: left;">int</td>
<td style="text-align: left;"><code>5.0</code></td>
<td style="text-align: left;">The amount of smoothing to apply to circular molecule splines.</td>
</tr>
<tr>
<td style="text-align: left;"></td>
<td style="text-align: left;"><code>spline_degree</code></td>
<td style="text-align: left;">int</td>
<td style="text-align: left;"><code>3</code></td>
<td style="text-align: left;">The polynomial degree of the spline. Smaller, odd degrees work best <a href="https://docs.scipy.org/doc/scipy/reference/generated/scipy.interpolate.splrep.html">SciPy - slprep</a>.</td>
</tr>
<tr>
<td style="text-align: left;"><code>plotting</code></td>
<td style="text-align: left;"><code>run</code></td>
<td style="text-align: left;">boolean</td>
<td style="text-align: left;"><code>true</code></td>
<td style="text-align: left;">Whether to run plotting. Options : <code>true</code>, <code>false</code></td>
</tr>
<tr>
<td style="text-align: left;"></td>
<td style="text-align: left;"><code>style</code></td>
<td style="text-align: left;">str</td>
<td style="text-align: left;"><code>topostats.mplstyle</code></td>
<td style="text-align: left;">The default loads a custom <a href="https://matplotlib.org/stable/users/explain/customizing.html#the-matplotlibrc-file">matplotlibrc param file</a> that comes with TopoStats. Users can specify the path to their own style file as an alternative.</td>
</tr>
<tr>
<td style="text-align: left;"></td>
<td style="text-align: left;"><code>save_format</code></td>
<td style="text-align: left;">string</td>
<td style="text-align: left;"><code>null</code></td>
<td style="text-align: left;">Format to save images in, <code>null</code> defaults to <code>png</code> see <a href="https://matplotlib.org/stable/api/_as_gen/matplotlib.pyplot.savefig.html">matplotlib.pyplot.savefig</a></td>
</tr>
<tr>
<td style="text-align: left;"></td>
<td style="text-align: left;"><code>savefig_dpi</code></td>
<td style="text-align: left;">string / float</td>
<td style="text-align: left;"><code>null</code></td>
<td style="text-align: left;">Dots Per Inch (DPI), if <code>null</code> then the value <code>figure</code> is used, for other values (typically integers) see [#further-customisation] and <a href="https://matplotlib.org/stable/api/_as_gen/matplotlib.pyplot.savefig.html">Matplotlib</a>. Low DPI's improve processing time but can reduce the plotted trace (but not the actual trace) accuracy.</td>
</tr>
<tr>
<td style="text-align: left;"></td>
<td style="text-align: left;"><code>pixel_interpolation</code></td>
<td style="text-align: left;">string</td>
<td style="text-align: left;"><code>null</code></td>
<td style="text-align: left;">Interpolation method for image plots. Recommended default 'null' prevents banding that occurs in some images. If interpolation is needed, we recommend <code>gaussian</code>. See <a href="https://matplotlib.org/stable/gallery/images_contours_and_fields/interpolation_methods.html">matplotlib imshow interpolations documentation</a> for details.</td>
</tr>
<tr>
<td style="text-align: left;"></td>
<td style="text-align: left;"><code>image_set</code></td>
<td style="text-align: left;">string</td>
<td style="text-align: left;"><code>all</code></td>
<td style="text-align: left;">Which images to plot. Options : <code>all</code>, <code>core</code> (flattened image, grain mask overlay and trace overlay only).</td>
</tr>
<tr>
<td style="text-align: left;"></td>
<td style="text-align: left;"><code>zrange</code></td>
<td style="text-align: left;">list</td>
<td style="text-align: left;"><code>[0, 3]</code></td>
<td style="text-align: left;">Low (first number) and high (second number) height range for core images (can take [null, null]). <strong>NB</strong> <code>low &lt;= high</code> otherwise you will see a <code>ValueError: minvalue must be less than or equal to maxvalue</code> error.</td>
</tr>
<tr>
<td style="text-align: left;"></td>
<td style="text-align: left;"><code>colorbar</code></td>
<td style="text-align: left;">boolean</td>
<td style="text-align: left;"><code>true</code></td>
<td style="text-align: left;">Whether to include the colorbar scale in plots. Options <code>true</code>, <code>false</code></td>
</tr>
<tr>
<td style="text-align: left;"></td>
<td style="text-align: left;"><code>axes</code></td>
<td style="text-align: left;">boolean</td>
<td style="text-align: left;"><code>true</code></td>
<td style="text-align: left;">Whether to include the axes in the produced plots.</td>
</tr>
<tr>
<td style="text-align: left;"></td>
<td style="text-align: left;"><code>num_ticks</code></td>
<td style="text-align: left;">null / int</td>
<td style="text-align: left;"><code>null</code></td>
<td style="text-align: left;">Number of ticks to have along the x and y axes. Options : <code>null</code> (auto) or an integer &gt;1</td>
</tr>
<tr>
<td style="text-align: left;"></td>
<td style="text-align: left;"><code>cmap</code></td>
<td style="text-align: left;">string</td>
<td style="text-align: left;"><code>null</code></td>
<td style="text-align: left;">Colormap/colourmap to use. Defaults to 'nanoscope' if null (defined in <code>topostats/topostats.mplstyle</code>). Other options are 'afmhot', 'viridis' etc., see <a href="https://matplotlib.org/stable/users/explain/colors/colormaps.html">Matplotlib : Choosing Colormaps</a>.</td>
</tr>
<tr>
<td style="text-align: left;"></td>
<td style="text-align: left;"><code>mask_cmap</code></td>
<td style="text-align: left;">string</td>
<td style="text-align: left;"><code>blu</code></td>
<td style="text-align: left;">Color used when masking regions. Options <code>blu</code>, <code>jet_r</code> or any valid Matplotlib colour.</td>
</tr>
<tr>
<td style="text-align: left;"></td>
<td style="text-align: left;"><code>histogram_log_axis</code></td>
<td style="text-align: left;">boolean</td>
<td style="text-align: left;"><code>false</code></td>
<td style="text-align: left;">Whether to plot hisograms using a logarithmic scale or not. Options: <code>true</code>, <code>false</code>.</td>
</tr>
<tr>
<td style="text-align: left;"><code>summary_stats</code></td>
<td style="text-align: left;"><code>run</code></td>
<td style="text-align: left;">boolean</td>
<td style="text-align: left;"><code>true</code></td>
<td style="text-align: left;">Whether to generate summary statistical plots of the distribution of different metrics grouped by the image that has been processed.</td>
</tr>
<tr>
<td style="text-align: left;"></td>
<td style="text-align: left;"><code>config</code></td>
<td style="text-align: left;">str</td>
<td style="text-align: left;"><code>null</code></td>
<td style="text-align: left;">Path to a summary config YAML file that configures/controls how plotting is done. If one is not specified either the command line argument <code>--summary_config</code> value will be used or if that option is not invoked the default <code>topostats/summary_config.yaml</code> will be used.</td>
</tr>
</tbody>
</table>
<h2 id="summary-configuration">Summary Configuration</h2>
<p>Plots summarising the distribution of metrics are generated by default. The behaviour is controlled by a configuration
file. The default example can be found in <code>topostats/summary_config.yaml</code>. The fields of this file are described below.</p>
<table>
<thead>
<tr>
<th style="text-align: left;">Section</th>
<th style="text-align: left;">Sub-Section</th>
<th style="text-align: left;">Data Type</th>
<th style="text-align: left;">Default</th>
<th style="text-align: left;">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left;"><code>output_dir</code></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"><code>str</code></td>
<td style="text-align: left;"><code>./output/</code></td>
<td style="text-align: left;">Where output plots should be saved to.</td>
</tr>
<tr>
<td style="text-align: left;"><code>csv_file</code></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"><code>str</code></td>
<td style="text-align: left;"><code>null</code></td>
<td style="text-align: left;">Where the results file should be loaded when running <code>toposum</code></td>
</tr>
<tr>
<td style="text-align: left;"><code>file_ext</code></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"><code>str</code></td>
<td style="text-align: left;"><code>png</code></td>
<td style="text-align: left;">File type to save images as.</td>
</tr>
<tr>
<td style="text-align: left;"><code>var_to_label</code></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"><code>str</code></td>
<td style="text-align: left;"><code>null</code></td>
<td style="text-align: left;">Optional YAML file that maps variable names to labels, uses <code>topostats/var_to_label.yaml</code> if null.</td>
</tr>
<tr>
<td style="text-align: left;"><code>molecule_id</code></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"><code>str</code></td>
<td style="text-align: left;"><code>molecule_number</code></td>
<td style="text-align: left;">Variable containing the molecule number.</td>
</tr>
<tr>
<td style="text-align: left;"><code>image_id</code></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"><code>str</code></td>
<td style="text-align: left;"><code>image</code></td>
<td style="text-align: left;">Variable containing the image identifier.</td>
</tr>
<tr>
<td style="text-align: left;"><code>hist</code></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"><code>bool</code></td>
<td style="text-align: left;"><code>True</code></td>
<td style="text-align: left;">Whether to plot a histogram of statistics.</td>
</tr>
<tr>
<td style="text-align: left;"><code>bins</code></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"><code>int</code></td>
<td style="text-align: left;"><code>20</code></td>
<td style="text-align: left;">Number of bins to plot in histogram.</td>
</tr>
<tr>
<td style="text-align: left;"><code>stat</code></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"><code>str</code></td>
<td style="text-align: left;"><code>count</code></td>
<td style="text-align: left;">What metric to plot on histogram valid values are <code>count</code> (default), <code>frequency</code>, <code>probability</code>, <code>percent</code>, <code>density</code></td>
</tr>
<tr>
<td style="text-align: left;"><code>kde</code></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"><code>bool</code></td>
<td style="text-align: left;"><code>True</code></td>
<td style="text-align: left;">Whether to include a Kernel Density Estimate on histograms. <strong>NB</strong> if both <code>hist</code> and <code>kde</code> are true they are overlaid.</td>
</tr>
<tr>
<td style="text-align: left;"><code>violin</code></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"><code>bool</code></td>
<td style="text-align: left;"><code>True</code></td>
<td style="text-align: left;">Whether to generate <a href="https://en.wikipedia.org/wiki/Violin_plot">Violin Plots</a>.</td>
</tr>
<tr>
<td style="text-align: left;"><code>figsize</code></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"><code>list</code></td>
<td style="text-align: left;"><code>[16, 9]</code></td>
<td style="text-align: left;">Figure size (x then y dimensions).</td>
</tr>
<tr>
<td style="text-align: left;"><code>alpha</code></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"><code>float</code></td>
<td style="text-align: left;"><code>0.5</code></td>
<td style="text-align: left;">Level of transparency to use when plotting.</td>
</tr>
<tr>
<td style="text-align: left;"><code>palette</code></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"><code>str</code></td>
<td style="text-align: left;"><code>bright</code></td>
<td style="text-align: left;">Seaborn color palette. Options <code>colorblind</code>, <code>deep</code>, <code>muted</code>, <code>pastel</code>, <code>bright</code>, <code>dark</code>, <code>Spectral</code>, <code>Set2</code></td>
</tr>
<tr>
<td style="text-align: left;"><code>stats_to_sum</code></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"><code>list</code></td>
<td style="text-align: left;"><code>str</code></td>
<td style="text-align: left;">A list of strings of variables to plot, comment (placing a <code>#</code> at the start of the line) and uncomment as required. Possible values are <code>area</code>, <code>area_cartesian_bbox</code>, <code>aspect_ratio</code>, <code>banding_angle</code>, <code>contour_length</code>, <code>end_to_end_distance</code>, <code>height_max</code>, <code>height_mean</code>, <code>height_median</code>, <code>height_min</code>, <code>radius_max</code>, <code>radius_mean</code>, <code>radius_median</code>, <code>radius_min</code>, <code>smallest_bounding_area</code>, <code>smallest_bounding_length</code>, <code>smallest_bounding_width</code>, <code>volume</code></td>
</tr>
</tbody>
</table>
<h2 id="validation">Validation</h2>
<p>Configuration files are validated against a schema to check that the values in the configuration file are within the
expected ranges or valid parameters. This helps capture problems early and should provide informative messages as to
what needs correcting if there are errors.</p>
<h2 id="matplotlib-style">Matplotlib Style</h2>
<p>TopoStats generates a number of images of the scans at various steps in the processing. These are plotted using the
Python library <a href="https://matplotlib.org/stable/">Matplotlib</a>. A custom
<a href="https://matplotlib.org/stable/users/explain/customizing.html#the-matplotlibrc-file"><code>matplotlibrc</code></a> file is included in
TopoStats which defines the default parameters for generating images. This covers <em>all</em> aspects of a plot that can be
customised, for example we define custom colour maps <code>nanoscope</code> and <code>afmhot</code>. By default the former is configured to
be used. Other parameters that are customised are the <code>font.size</code> which affects axis labels and titles.</p>
<p>If you wish to modify the look of all images that are output you can generate a copy of the default configuration using
<code>topostats create-matplotlibrc</code> command which will write the output to <code>topostats.mplstyle</code> by default (<strong>NB</strong> there are
flags which allow you to specify the location and filename to write to, see <code>topostats create-matplotlibrc --help</code> for
further details).</p>
<p>You should read and understand this commented file in detail. Once changes have been made you can run TopoStats using
this custom file using the following command (substituting <code>my_custom_topostats.mplstyle</code> for whatever you have saved
your file as).</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-4-1"><a id="__codelineno-4-1" name="__codelineno-4-1" href="#__codelineno-4-1"></a>topostats<span class="w"> </span>--matplotlibrc<span class="w"> </span>my_custom_topostats.mplstyle<span class="w"> </span>process
</span></code></pre></div>
<p><strong>NB</strong> Plotting with Matplotlib is highly configurable and there are a plethora of options that you may wish to
tweak. Before delving into customising <code>matplotlibrc</code> files it is recommended that you develop and build the style of
plot you wish to generate using Jupyter Notebooks and then translate them to the configuration file. Detailing all of
the possible options is beyond the scope of TopoStats but the <a href="https://matplotlib.org/">Matplotlib documentation</a> is
comprehensive and there are some sample Jupyter Notebooks (see <code>notebooks/03-plotting-scans.ipynb</code>) that guide you
through the basics.</p>
<h3 id="further-customisation">Further customisation</h3>
<p>Whilst the overall look of images is controlled in this manner there is one additional file that controls how
images are plotted in terms of filenames, titles and image types and whether an image is part of the <code>core</code> subset
(flattened image, grain mask overlay and trace overlay) that are always generated or not.</p>
<p>This is the <code>topostats/plotting_dictionary.yaml</code> which for each image stage defines whether it is a component of the
<code>core</code> subset of images that are always generated, sets the <code>filename</code>, the <code>title</code> on the plot, the <code>image_type</code>
(whether it is a binary image), the <code>savefig_dpi</code> which controls the Dots Per Inch (essentially the resolution). Each
image has the following structure.</p>
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-5-1"><a id="__codelineno-5-1" name="__codelineno-5-1" href="#__codelineno-5-1"></a><span class="nt">z_threshed</span><span class="p">:</span>
</span><span id="__span-5-2"><a id="__codelineno-5-2" name="__codelineno-5-2" href="#__codelineno-5-2"></a><span class="w">  </span><span class="nt">title</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Height</span><span class="nv"> </span><span class="s">Thresholded&quot;</span>
</span><span id="__span-5-3"><a id="__codelineno-5-3" name="__codelineno-5-3" href="#__codelineno-5-3"></a><span class="w">  </span><span class="nt">image_type</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;non-binary&quot;</span>
</span><span id="__span-5-4"><a id="__codelineno-5-4" name="__codelineno-5-4" href="#__codelineno-5-4"></a><span class="w">  </span><span class="nt">savefig_dpi</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">100</span>
</span><span id="__span-5-5"><a id="__codelineno-5-5" name="__codelineno-5-5" href="#__codelineno-5-5"></a><span class="w">  </span><span class="nt">core_set</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
</span></code></pre></div>
<p>Whilst it is possible to edit this file it is not recommended to do so.</p>
<p>The following section describes how to override the DPI settings defined in this file and change the global <code>cmap</code>
(colormap/colourmap) used in plotting and output format.</p>
<h4 id="dpi">DPI</h4>
<p>During development it was found that setting high DPI globally for all images had a detrimental impact on processing
speeds, slowing down the overall processing time. The solution we have implemented is to use the
<code>topostats/plotting_dictionary.yaml</code> file and set the <code>savefig_dpi</code> parameter on a per-image basis.</p>
<p>If you wish to change the DPI there are two options, you can change the value for <em>all</em> images by modifying the setting
in your a <a href="#generating-a-configuration">custom configuration</a> by modifying the <code>savefig_dpi</code> from <code>null</code> to your desired
value. The example below shows a section of the configuration file you can generate and setting this value to <code>400</code>.</p>
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-6-1"><a id="__codelineno-6-1" name="__codelineno-6-1" href="#__codelineno-6-1"></a><span class="nt">plotting</span><span class="p">:</span>
</span><span id="__span-6-2"><a id="__codelineno-6-2" name="__codelineno-6-2" href="#__codelineno-6-2"></a><span class="w">  </span><span class="nt">run</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span><span class="w"> </span><span class="c1"># Options : true, false</span>
</span><span id="__span-6-3"><a id="__codelineno-6-3" name="__codelineno-6-3" href="#__codelineno-6-3"></a><span class="w">  </span><span class="nt">style</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">topostats.mplstyle</span><span class="w"> </span><span class="c1"># Options : topostats.mplstyle or path to a matplotlibrc params file</span>
</span><span id="__span-6-4"><a id="__codelineno-6-4" name="__codelineno-6-4" href="#__codelineno-6-4"></a><span class="w">  </span><span class="nt">savefig_format</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">null</span><span class="w"> </span><span class="c1"># Options : null (defaults to png) or see https://matplotlib.org/stable/api/_as_gen/matplotlib.pyplot.savefig.html</span>
</span><span id="__span-6-5"><a id="__codelineno-6-5" name="__codelineno-6-5" href="#__codelineno-6-5"></a><span class="w">  </span><span class="nt">savefig_dpi</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">400</span><span class="w"> </span><span class="c1"># Options : null (defaults to format) see https://afm-spm.github.io/TopoStats/main/configuration.html#further-customisation and https://matplotlib.org/stable/api/_as_gen/matplotlib.pyplot.savefig.html</span>
</span></code></pre></div>
<p>The value in the configuration file (or the default if none is specified) can also be configured at run-time
using the <code>--savefig-dpi ###</code> option to the <code>topostats process</code>. This will over-ride both the default or any value
specified in a custom configuration you may have set. The following sets this to <code>400</code></p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-7-1"><a id="__codelineno-7-1" name="__codelineno-7-1" href="#__codelineno-7-1"></a>topostats<span class="w"> </span>process<span class="w"> </span>--savefig-dpi<span class="w"> </span><span class="m">400</span>
</span></code></pre></div>
<p><strong>NB</strong> Changing the DPI in this manner will apply to <em>all</em> images and may significantly reduce processing speed as it
takes longer to write images with high DPI to disk.</p>
<p>If you wish to have fine grained control over the DPI on a per-image basis when batch processing then your only recourse
is to change the values in <code>topostats/plotting_dictionary.yaml</code>. Where this is depends on how you have installed
TopoStats, if it is from a clone of the Git repository then it can be found in
<code>TopoStats/topostats/plotting_dictionary.yaml</code>. If you have installed from PyPI using <code>pip install topostats</code> then it
will be under the virtual environment you have created
e.g. <code>~/.virtualenvs/topostats/lib/python3.11/site-packages/topostats/topostats/plotting_dictionary.yaml</code> if you are
using plain virtual environments or
<code>~/miniconda3/envs/topostats/lib/python3.11/site-packages/topostats/topostats/plotting_dictionary.yaml</code> if you are using
Conda environments and chose <code>~/miniconda3</code> as the base directory when installing Conda.</p>
<p>If you have installed TopoStats from the cloned Git repository the file will be under
<code>TopoStats/topostats/plotting_dictionary.yaml</code>.</p>
<p><strong>NB</strong> The exact location will be highly specific to your system so the above are just guides as to where to find
things.</p>
<h4 id="colormap">Colormap</h4>
<p>The colormap used to plot images is set globally in <code>topostats/default_config.yaml</code>. TopoStats includes two custom
colormaps <code>nanoscope</code> and <code>afmhot</code> but any colormap recognised by Matplotlib can be used (see the <a href="https://matplotlib.org/stable/gallery/color/colormap_reference.html">Matplotlib Colormap
reference</a> for choices).</p>
<p>If you want to modify the colormap that is used you have two options. Firstly you can <a href="#generating-a-configuration">generate a
configuration</a> file and modify the field <code>cmap</code> to your choice. The example below shows
changing this from <code>null</code> (which defaults to <code>nanoscope</code> as defined in <code>topostats.mplstyle</code>) to <code>rainbow</code>.</p>
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-8-1"><a id="__codelineno-8-1" name="__codelineno-8-1" href="#__codelineno-8-1"></a><span class="nt">plotting</span><span class="p">:</span>
</span><span id="__span-8-2"><a id="__codelineno-8-2" name="__codelineno-8-2" href="#__codelineno-8-2"></a><span class="w">  </span><span class="l l-Scalar l-Scalar-Plain">...</span>
</span><span id="__span-8-3"><a id="__codelineno-8-3" name="__codelineno-8-3" href="#__codelineno-8-3"></a><span class="w">  </span><span class="l l-Scalar l-Scalar-Plain">cmap</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">rainbow</span><span class="w"> </span><span class="c1"># Colormap/colourmap to use (default is &#39;nanoscope&#39; which is used if null, other options are &#39;afmhot&#39;, &#39;viridis&#39; etc.)</span>
</span></code></pre></div>
<p>Alternatively it is possible to specify the colormap that is used on the command line using the <code>--cmap</code> option to
<code>topostats process</code>. This will over-ride both the default or any value specified in a custom configuration you may have
set. The following sets this to <code>rainbow</code>.</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-9-1"><a id="__codelineno-9-1" name="__codelineno-9-1" href="#__codelineno-9-1"></a>topostats<span class="w"> </span>process<span class="w"> </span>--cmap<span class="w"> </span>rainbow
</span></code></pre></div>
<h4 id="saved-image-format">Saved Image format</h4>
<p>Matplotlib, and by extension TopoStats, supports saving images in a range of different formats including <code>png</code>
(<a href="https://en.wikipedia.org/wiki/PNG">Portable Network Graphic</a>), <code>svg</code> (<a href="https://en.wikipedia.org/wiki/SVG">Scalable Vector
Graphics</a>), <code>pdf</code> (<a href="https://en.wikipedia.org/wiki/PDF">Portable Document
Format</a>), and <code>tif</code> (<a href="https://en.wikipedia.org/wiki/TIFF">Tag Image File
Format</a>). The default is <code>png</code> but, as with both DPI and Colormap, these can be
easily changed via a custom configuration file or command line options to change these without having to edit the
<a href="matplotlib-style">Matplotlib Style file</a>. If using <code>tif</code> it is worth being aware that although the image will be saved,
this will be without metadata since this is not supported for <code>tif</code> files (see the note under <code>metadata</code> of <a href="https://matplotlib.org/stable/api/_as_gen/matplotlib.pyplot.savefig.html">Matplotlib
savefig</a>).</p>
<p>If you want to modify the output file format that is used you have two options. Firstly you can <a href="generating-a-configuration">generate a
configuration</a> file and modify the field <code>savefig_format</code> to your choice. The example below
shows changing this from <code>null</code> (which defaults to <code>png</code> as defined in <code>topostats.mplstyle</code>) to <code>svg</code>.</p>
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-10-1"><a id="__codelineno-10-1" name="__codelineno-10-1" href="#__codelineno-10-1"></a><span class="nt">plotting</span><span class="p">:</span>
</span><span id="__span-10-2"><a id="__codelineno-10-2" name="__codelineno-10-2" href="#__codelineno-10-2"></a><span class="w">  </span><span class="l l-Scalar l-Scalar-Plain">...</span>
</span><span id="__span-10-3"><a id="__codelineno-10-3" name="__codelineno-10-3" href="#__codelineno-10-3"></a><span class="w">  </span><span class="l l-Scalar l-Scalar-Plain">savefig_format</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">svg</span><span class="w"> </span><span class="c1"># Options : null (defaults to png) or see https://matplotlib.org/stable/api/_as_gen/matplotlib.pyplot.savefig.html</span>
</span></code></pre></div>
<p>Alternatively it is possible to specify the output image format that is used on the command line using the
<code>--savefig-format</code> option to <code>topostats process</code>. This will over-ride both the default or any value specified in a
custom configuration you may have set. The following sets this to <code>svg</code>.</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-11-1"><a id="__codelineno-11-1" name="__codelineno-11-1" href="#__codelineno-11-1"></a>topostats<span class="w"> </span>process<span class="w"> </span>--savefig-format<span class="w"> </span>svg
</span></code></pre></div>
<p><strong>NB</strong> Note that these options are not mutually exclusive and can therefore be combined along with any of the other
options available to <code>topostats process</code>. The following would use a DPI of <code>400</code>, set the colormap to <code>rainbow</code> and the
output format to <code>svg</code> when running Topostats and would over-ride options in any custom configuration file or matplotlib
style file.</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-12-1"><a id="__codelineno-12-1" name="__codelineno-12-1" href="#__codelineno-12-1"></a>topostats<span class="w"> </span>process<span class="w"> </span>--savefig-dpi<span class="w"> </span><span class="m">400</span><span class="w"> </span>--cmap<span class="w"> </span>rainbow<span class="w"> </span>--savefig-format<span class="w"> </span>svg
</span></code></pre></div>
<h3 id="absolute-v-relative-paths">Absolute v Relative paths</h3>
<p>When writing file paths you can use absolute or relative paths. On Windows systems absolute paths start with the
drive letter (e.g. <code>c:/</code>) on Linux and OSX systems they start with <code>/</code>. Relative paths are started either with a <code>./</code>
which denotes the current directory or one or more <code>../</code> which means the higher level directory from the current
directory. You can always find the current directory you are in using the <code>pwd</code> (<code>p</code>rint <code>w</code>orking <code>d</code>irectory). If
your work is in <code>/home/user/path/to/my/data</code> and <code>pwd</code> prints <code>/home/user</code> then the relative path to your data is
<code>./path/to/my/data</code>. The <code>cd</code> command is used to <code>c</code>hange <code>d</code>irectory.</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-13-1"><a id="__codelineno-13-1" name="__codelineno-13-1" href="#__codelineno-13-1"></a><span class="nb">pwd</span>
</span><span id="__span-13-2"><a id="__codelineno-13-2" name="__codelineno-13-2" href="#__codelineno-13-2"></a>/home/user/
</span><span id="__span-13-3"><a id="__codelineno-13-3" name="__codelineno-13-3" href="#__codelineno-13-3"></a><span class="c1"># Two ways of changing directory using a relative path</span>
</span><span id="__span-13-4"><a id="__codelineno-13-4" name="__codelineno-13-4" href="#__codelineno-13-4"></a><span class="nb">cd</span><span class="w"> </span>./path/to/my/data
</span><span id="__span-13-5"><a id="__codelineno-13-5" name="__codelineno-13-5" href="#__codelineno-13-5"></a><span class="nb">pwd</span>
</span><span id="__span-13-6"><a id="__codelineno-13-6" name="__codelineno-13-6" href="#__codelineno-13-6"></a>/home/user/path/to/my/data
</span><span id="__span-13-7"><a id="__codelineno-13-7" name="__codelineno-13-7" href="#__codelineno-13-7"></a><span class="c1"># Using an absolute path</span>
</span><span id="__span-13-8"><a id="__codelineno-13-8" name="__codelineno-13-8" href="#__codelineno-13-8"></a><span class="nb">cd</span><span class="w"> </span>/home/user/path/to/my/data
</span><span id="__span-13-9"><a id="__codelineno-13-9" name="__codelineno-13-9" href="#__codelineno-13-9"></a><span class="nb">pwd</span>
</span><span id="__span-13-10"><a id="__codelineno-13-10" name="__codelineno-13-10" href="#__codelineno-13-10"></a>/home/user/path/to/my/data
</span></code></pre></div>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      
      <script id="__config" type="application/json">{"annotate": null, "base": "..", "features": [], "search": "../assets/javascripts/workers/search.2c215733.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": {"provider": "mike"}}</script>
    
    
      <script src="../assets/javascripts/bundle.79ae519e.min.js"></script>
      
        <script src="../javascripts/mathjax.js"></script>
      
        <script src="https://unpkg.com/mathjax@3/es5/tex-mml-chtml.js"></script>
      
    
  </body>
</html>